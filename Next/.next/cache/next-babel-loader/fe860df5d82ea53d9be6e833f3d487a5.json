{"ast":null,"code":"import { LOGIN_USER_REQUEST, LOGIN_USER_SUCCESS, LOGIN_USER_FAILURE, LOGOUT_USER, REGISTER_USER_FAILURE, REGISTER_USER_SUCCESS, REGISTER_USER_REQUEST } from \"./userTypes\";\nimport API_URL from \"../helpers/API_URL\";\nimport validateEmail from \"../helpers/validateEmail\";\nimport Router from 'next/router';\nimport axios from \"axios\";\n\nvar loginUserRequest = function loginUserRequest() {\n  return {\n    type: LOGIN_USER_REQUEST\n  };\n};\n\nvar loginUserSuccess = function loginUserSuccess(res) {\n  return {\n    type: LOGIN_USER_SUCCESS,\n    payload: res\n  };\n};\n\nvar loginUserFailure = function loginUserFailure(err) {\n  return {\n    type: LOGIN_USER_FAILURE,\n    payload: err\n  };\n};\n\nexport var logoutUser = function logoutUser(history) {\n  Router.push(\"/\");\n  return {\n    type: LOGOUT_USER\n  };\n};\nexport var loginUser = function loginUser(data, history, message) {\n  var email = data.email,\n      password = data.password;\n  email = typeof email === \"string\" && validateEmail(email) ? email.trim() : false;\n  password = typeof password === \"string\" && password.trim().length > 0 ? password : false;\n\n  if (!(email && password)) {\n    return function (dispatch) {\n      if (!email) {\n        message.error(\"Invalid Email\");\n        dispatch(registerUserFailure(\"Invalid Email\"));\n      } else if (password) {\n        message.error(\"Invalid Password must be more than 5 characters\");\n        dispatch(registerUserFailure(\"Invalid Password\"));\n      }\n    };\n  }\n\n  return function (dispatch) {\n    dispatch(loginUserRequest());\n    axios.post(\"\".concat(API_URL, \"user/login\"), data).then(function (response) {\n      var res = response.data;\n      dispatch(loginUserSuccess(res));\n      Router.replace(\"/\");\n    })[\"catch\"](function (error) {\n      message.error(error.response.data.message);\n      dispatch(loginUserFailure(error.message));\n    });\n  };\n};\n\nvar registerUserRequest = function registerUserRequest() {\n  return {\n    type: REGISTER_USER_REQUEST\n  };\n};\n\nvar registerUserSuccess = function registerUserSuccess(res) {\n  return {\n    type: REGISTER_USER_SUCCESS,\n    payload: res\n  };\n};\n\nvar registerUserFailure = function registerUserFailure(err) {\n  return {\n    type: REGISTER_USER_FAILURE,\n    payload: err\n  };\n};\n\nexport var registerUser = function registerUser(data, history, message) {\n  var displayName = data.displayName,\n      email = data.email,\n      password = data.password;\n  displayName = typeof displayName === \"string\" && displayName.trim().length > 0 ? displayName.trim() : false;\n  email = typeof email === \"string\" && validateEmail(email) ? email.trim() : false;\n  password = typeof password === \"string\" && password.trim().length > 0 ? password : false;\n\n  if (!(displayName && email && password)) {\n    return function (dispatch) {\n      if (!displayName) {\n        message.error(\"Invalid Display Name\");\n        dispatch(registerUserFailure(\"Invalid Display Name\"));\n      } else if (!email) {\n        message.error(\"Invalid Email\");\n        dispatch(registerUserFailure(\"Invalid Email\"));\n      } else if (password) {\n        message.error(\"Invalid Password must be more than 5 characters\");\n        dispatch(registerUserFailure(\"Invalid Password\"));\n      }\n    };\n  }\n\n  return function (dispatch) {\n    dispatch(registerUserRequest());\n    axios.post(\"\".concat(API_URL, \"user/register\"), {\n      displayName: displayName,\n      email: email,\n      password: password\n    }).then(function (response) {\n      var res = response.data;\n      dispatch(registerUserSuccess(res));\n      Router.push(\"/\");\n    })[\"catch\"](function (error) {\n      message.error(error.response.data.message);\n      dispatch(registerUserFailure(error.message));\n    });\n  };\n};","map":{"version":3,"sources":["/home/roopam/Videos/redcarpet/stack-overflow-clone/next-app/redux/user/userActions.js"],"names":["LOGIN_USER_REQUEST","LOGIN_USER_SUCCESS","LOGIN_USER_FAILURE","LOGOUT_USER","REGISTER_USER_FAILURE","REGISTER_USER_SUCCESS","REGISTER_USER_REQUEST","API_URL","validateEmail","Router","axios","loginUserRequest","type","loginUserSuccess","res","payload","loginUserFailure","err","logoutUser","history","push","loginUser","data","message","email","password","trim","length","dispatch","error","registerUserFailure","post","then","response","replace","registerUserRequest","registerUserSuccess","registerUser","displayName"],"mappings":"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","sourcesContent":["import {\n  LOGIN_USER_REQUEST,\n  LOGIN_USER_SUCCESS,\n  LOGIN_USER_FAILURE,\n  LOGOUT_USER,\n  REGISTER_USER_FAILURE,\n  REGISTER_USER_SUCCESS,\n  REGISTER_USER_REQUEST,\n} from \"./userTypes\";\nimport API_URL from \"../helpers/API_URL\";\nimport validateEmail from \"../helpers/validateEmail\";\nimport  Router from 'next/router';\nimport axios from \"axios\";\n\nconst loginUserRequest = () => ({\n  type: LOGIN_USER_REQUEST\n});\n\nconst loginUserSuccess = res => ({\n  type: LOGIN_USER_SUCCESS,\n  payload: res\n});\n\nconst loginUserFailure = err => ({\n  type: LOGIN_USER_FAILURE,\n  payload: err\n});\n\nexport const logoutUser = history => {\n  Router.push(\"/\");\n  return {\n    type: LOGOUT_USER\n  };\n};\n\nexport const loginUser = (data, history, message) => {\n  let {  email, password } = data;\n\n  email =\n    typeof email === \"string\" && validateEmail(email) ? email.trim() : false;\n  password =\n    typeof password === \"string\" && password.trim().length > 0\n      ? password\n      : false;\n  if (!(email && password)) {\n    return function(dispatch) {\n      if (!email) {\n        message.error(\"Invalid Email\");\n        dispatch(registerUserFailure(\"Invalid Email\"));\n      } else if (password) {\n        message.error(\"Invalid Password must be more than 5 characters\");\n        dispatch(registerUserFailure(\"Invalid Password\"));\n      }\n    };\n  }\n  return function(dispatch) {\n    dispatch(loginUserRequest());\n    axios.post(`${API_URL}user/login`, data)\n      .then(response => {\n        const res = response.data;\n        dispatch(loginUserSuccess(res));\n\n        Router.replace(\"/\");\n      })\n      .catch(error => {\n        message.error(error.response.data.message);\n        dispatch(loginUserFailure(error.message));\n      });\n  };\n};\n\nconst registerUserRequest = () => ({\n  type: REGISTER_USER_REQUEST\n});\n\nconst registerUserSuccess = res => ({\n  type: REGISTER_USER_SUCCESS,\n  payload: res\n});\n\nconst registerUserFailure = err => ({\n  type: REGISTER_USER_FAILURE,\n  payload: err\n});\n\nexport const registerUser = (data, history, message) => {\n  let { displayName, email, password } = data;\n  displayName =\n    typeof displayName === \"string\" && displayName.trim().length > 0\n      ? displayName.trim()\n      : false;\n  email =\n    typeof email === \"string\" && validateEmail(email) ? email.trim() : false;\n  password =\n    typeof password === \"string\" && password.trim().length > 0\n      ? password\n      : false;\n  if (!(displayName && email && password)) {\n    return function(dispatch) {\n      if (!displayName) {\n        message.error(\"Invalid Display Name\");\n        dispatch(registerUserFailure(\"Invalid Display Name\"));\n      } else if (!email) {\n        message.error(\"Invalid Email\");\n        dispatch(registerUserFailure(\"Invalid Email\"));\n      } else if (password) {\n        message.error(\"Invalid Password must be more than 5 characters\");\n        dispatch(registerUserFailure(\"Invalid Password\"));\n      }\n    };\n  }\n  return function(dispatch) {\n    dispatch(registerUserRequest());\n    axios\n      .post(`${API_URL}user/register`, { displayName, email, password })\n      .then(response => {\n        const res = response.data;\n        dispatch(registerUserSuccess(res));\n\n        Router.push(\"/\");\n      })\n      .catch(error => {\n        message.error(error.response.data.message);\n        dispatch(registerUserFailure(error.message));\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}